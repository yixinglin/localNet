<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.hsgt.mappers.OfferMapper">

    <resultMap id="offerMap" type="org.hsgt.entities.pricing.Offer">
        <id property="id" column="productId"/>
        <association property="shippingGroup" column="shippingGroupId" javaType="org.hsgt.entities.common.ShippingGroup"
            select="org.hsgt.mappers.ShippingGroupMapper.selectById"/>
    </resultMap>

    <select id="selectList" resultMap="offerMap">
        select * from t_offer
    </select>

    <select id="selectById" resultMap="offerMap">
        select * from t_offer where productId=#{id}
    </select>

    <insert id="insert">
        insert into t_offer
            (productId, price, lowestPrice, productName, note, quantity, manufacturer, platform,
            amount, productKey, shippingGroupId) values
            (#{id}, #{price}, #{lowestPrice}, #{productName}, #{note}, #{quantity}, #{manufacturer}, #{platform},
            #{amount}, #{productKey}, #{shippingGroup.id})
    </insert>

    <update id="updateById">
        update price=#{price}, productName=#{productName}, quantity=#{quantity}, manufacturer=#{manufacturer},
            productKey=#{productKey}, shippingGroupId=#{shippingGroup.id}
    </update>

</mapper>